version: "3.1"

# Form definition. Forms refer to slots defined below
forms:
  weather_for_location_form:
    required_slots:
      - user_location

# Slot definition. Slots refer to actions, entities, and intents defined below.
slots:
  user_location:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: user_location
        intent: inform_location

  mapped_location:
    type: text
    influence_conversation: false
    mappings:
      - type: custom
        action: action_request_location

  mapped_latitude:
    type: float
    influence_conversation: false
    mappings:
      - type: custom
        action: action_request_location

  mapped_longitude:
    type: float
    influence_conversation: false
    mappings:
      - type: custom
        action: action_request_location

  weather:
    type: text
    influence_conversation: false
    mappings:
      - type: custom
        action: action_request_weather

  temperature:
    type: float
    influence_conversation: false
    mappings:
      - type: custom
        action: action_request_weather

  temperature_unit:
    type: text
    influence_conversation: false
    mappings:
      - type: custom
        action: action_request_weather

# Action definition.
actions:
  - action_request_location
  - action_request_weather

# Entity definition.
entities:
  - user_location

# Intent definition.
intents:
  - greet
  - goodbye
  - affirm
  - deny
  - bot_challenge
  - request_weather
  - inform_location

# Response definition.
responses:
  utter_greet:
  - text: "Hey! How are you?"

  utter_goodbye:
  - text: "Bye"

  utter_iamabot:
  - text: "I am a bot, powered by Rasa."

  utter_ask_user_location:
  - text: "In which location?"
  - text: "Where do you want to know the weather?"
  - text: "For which city?"

  utter_location_mapping:
  - text: "Your requested location {user_location} was mapped to {mapped_location}."

  utter_weather:
  - text: "The weather in {mapped_location} is {weather} at {temperature} {temperature_unit}."

# Session configuration.
session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true
