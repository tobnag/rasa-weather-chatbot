version: "3.1"

# Slot definition. Slots refer to actions, entities, and intents defined below.
slots:
  user_location:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: city

  mapped_location:
    type: text
    influence_conversation: false
    mappings:
      - type: custom
        action: action_request_location

  mapped_latitude:
    type: float
    influence_conversation: false
    mappings:
      - type: custom
        action: action_request_location

  mapped_longitude:
    type: float
    influence_conversation: false
    mappings:
      - type: custom
        action: action_request_location

  weather:
    type: text
    influence_conversation: false
    mappings:
      - type: custom
        action: action_request_weather

  temperature:
    type: float
    influence_conversation: false
    mappings:
      - type: custom
        action: action_request_weather

  temperature_unit:
    type: text
    influence_conversation: false
    mappings:
      - type: custom
        action: action_request_weather

# Action definition.
actions:
  - action_request_location
  - action_request_weather

# Entity definition.
entities:
  - city

# Intent definition.
intents:
  - greet
  - goodbye
  - affirm
  - deny
  - bot_challenge
  - thanks
  - ask_weather
  - inform_location
  - ask_weather_in_location

# Response definition.
responses:
  utter_greet:
  - text: "Hey! How are you?"

  utter_goodbye:
  - text: "Bye"

  utter_iamabot:
  - text: "I am a bot, powered by Rasa."

  utter_welcome:
  - text: "You are welcome!"

  utter_ask_location:
  - text: "In which city?"
  - text: "Where do you want to know the weather?"

  utter_location_mapping:
  - text: "Your requested location {user_location} was mapped to {mapped_location}."

  utter_weather:
  - text: "The weather in {mapped_location} is {weather} at {temperature} {temperature_unit}."

# Session configuration.
session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true
